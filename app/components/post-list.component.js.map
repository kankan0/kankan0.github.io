{"version":3,"file":"post-list.component.js","sourceRoot":"","sources":["file:///C:/Users/lvxu/workspace/angular2/kankan/tmp/broccoli_type_script_compiler-input_base_path-f4YojrGj.tmp/0/src/app/components/post-list.component.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,qBAA6C,eAAe,CAAC,CAAA;AAC7D,uBAA+B,iBAAiB,CAAC,CAAA;AAGjD,yBAA4B,aAAa,CAAC,CAAA;AAQ1C;IAQE,2BAAoB,cAA8B,EAC9B,WAAwB;QADxB,mBAAc,GAAd,cAAc,CAAgB;QAC9B,gBAAW,GAAX,WAAW,CAAa;QAP5C,WAAM,GAAU,EAAE,CAAC;QAEX,UAAK,GAAW,EAAE,CAAC;QACnB,SAAI,GAAW,CAAC,CAAC;QACjB,iBAAY,GAAiB,IAAI,CAAC;IAGM,CAAC;IAEjD,oCAAQ,GAAR;QAAA,iBAcC;QAbC,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,CAAC,CAAC;YAChC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,SAAS,CACtD,UAAC,KAAU;gBACT,KAAI,CAAC,MAAM,GAAG,EAAE,CAAC;gBACjB,6BAA6B;gBAC7B,EAAE,CAAC,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;oBAC1B,KAAI,CAAC,aAAa,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC;gBAC5C,CAAC;gBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;oBAC7B,KAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC;gBAC3C,CAAC;YACH,CAAC,CACF,CAAC;QACJ,CAAC;IACH,CAAC;IAEO,yCAAa,GAArB,UAAsB,QAAgB;QAAtC,iBAUC;QATC,IAAI,CAAC,WAAW,CAAC,0BAA0B,CAAC,QAAQ,CAAC,CAAC,SAAS,CAC7D,UAAA,IAAI;YACF,oCAAoC;YACpC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACpB,IAAI,MAAM,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;gBAC1B,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,KAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;YAClD,CAAC;QACH,CAAC,CACF,CAAC;IACJ,CAAC;IAEO,4CAAgB,GAAxB,UAAyB,QAAgB;QAAzC,iBAUC;QATC,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,SAAS,CACzE,UAAA,IAAI;YACF,oCAAoC;YACpC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBAC5B,IAAI,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;gBAClC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,KAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;YAClD,CAAC;QACH,CAAC,CACF,CAAC;IACJ,CAAC;IAED,uCAAW,GAAX;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,CAAC,CAAC;YAC9B,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;QAClC,CAAC;IAEH,CAAC;IA9DH;QAAC,gBAAS,CAAC;YACT,QAAQ,EAAE,MAAM,CAAC,EAAE;YACnB,QAAQ,EAAE,cAAc;YACxB,WAAW,EAAE,0BAA0B;YACvC,SAAS,EAAE,CAAC,yBAAyB,CAAC;SACvC,CAAC;;yBAAA;IA2DF,wBAAC;AAAD,CAAC,AA1DD,IA0DC;AA1DY,yBAAiB,oBA0D7B,CAAA","sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { ActivatedRoute } from \"@angular/router\";\nimport { Subscription } from \"rxjs/Rx\";\n\nimport { DataService } from '../services';\n\n@Component({\n  moduleId: module.id,\n  selector: 'kk-post-list',\n  templateUrl: 'post-list.component.html',\n  styleUrls: ['post-list.component.css']\n})\nexport class PostListComponent implements OnInit, OnDestroy {\n\n  topics: any[] = [];\n\n  private count: number = 20;\n  private page: number = 0;\n  private subscription: Subscription = null;\n\n  constructor(private activatedRoute: ActivatedRoute,\n              private dataService: DataService) { }\n\n  ngOnInit() {\n    if (this.activatedRoute != null) {\n      this.subscription = this.activatedRoute.params.subscribe(\n        (param: any) => {\n          this.topics = [];\n          // route from today component\n          if (param['sub-category']) {\n            this.loadTodayData(param['sub-category']);\n          } else if (param['category']) {\n            this.loadCategoryData(param['category']);\n          }\n        }\n      );\n    }\n  }\n\n  private loadTodayData(category: string) {\n    this.dataService.fetchCategoryDetailOfToday(category).subscribe(\n      data => {\n        //console.log(JSON.stringify(data));\n        if (data.length > 0) {\n          var result = data.slice();\n          Array.prototype.push.apply(this.topics, result);\n        }\n      }\n    );\n  }\n\n  private loadCategoryData(category: string) {\n    this.dataService.fetchByCategory(category, this.count, this.page).subscribe(\n      data => {\n        //console.log(JSON.stringify(data));\n        if (data.results.length > 0) {\n          var result = data.results.slice();\n          Array.prototype.push.apply(this.topics, result);\n        }\n      }\n    );\n  }\n\n  ngOnDestroy() {\n    if (this.subscription != null) {\n      this.subscription.unsubscribe();\n    }\n\n  }\n\n}\n"]}